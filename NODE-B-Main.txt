#include <LPC21xx.H>
#include "header.h"
#define LED1 (1<<17) //L HL
#define LED2 (1<<18) //R HL
#define LED3 (1<<19) // head light
CAN1 r1;
u8 flag;
int op;
main(){
can1_init();
 config_vic_for_can1();
IODIR0|=LED1|LED2|LED3;
IOSET0|=LED1|LED2|LED3;
while(1){
//can1_rx(&r1);
if(flag==1)
{
 flag=0;//for next frame
 switch(op)
{
case 0x10: IOCLR0=LED1;
 delay_ms(50);
//flag=1;
break;
case 0x11: IOSET0=LED1;
delay_ms(50);
//flag=1;
break;
case 0x12:
delay_ms(50);
while(op==0x12)
{
IOCLR0=LED2;
delay_ms(50);
IOSET0=LED2;
delay_ms(50);
}
break;
case 0x13:
IOSET0=LED2;
//flag=1;
break;
case 0x14:
delay_ms(50);
while(op==0x14)
{
IOCLR0=LED3;
delay_ms(50);
IOSET0=LED3;
delay_ms(50);
}
break;
case 0x15:
IOSET0=LED3;
//flag=1;
break;
}
}
}
}